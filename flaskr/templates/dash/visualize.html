{% extends 'base.html' %}

{% block header %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualize Study Data</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Include Plotly.js for the pie chart -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Include Chart.js for the time graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
{% endblock %}

{% block content %}
<body class="background">
    <div class="center-container">
        <!-- Pie Chart Slot -->
        <div class="div" id="pie-chart" style="width:600px;height:250px;">
            <h2>Pie Chart</h2>
            <div id="pie-chart-data"></div> <!-- Placeholder for the pie chart -->
        </div>

        <!-- Time Graph Slot -->
        <div class="slot" id="time-graph">
            <h2>Time Graph</h2>
            <canvas id="time-graph-slot" style="width: 600px; height: 400px;"></canvas>
        </div>

    </div>

    <footer>
        <!-- Add footer content here if needed -->
    </footer>
    
    <!-- Embed the study_data as JSON in the HTML -->
    <script>
        // Convert the passed study_data dictionary into a JavaScript object
        const studyData = {{study_data | tojson}};
        
         // Prepare the data for the pie chart
        const values = studyData['hours_data'];  // Extract hours data
        const labels = studyData['classes_data'];  // Extract course names

        var data = [{
            values: values,
            labels: labels,
            type: 'pie'  // Pie chart type
        }];

        var layout = {
            title: 'Study Hours per Course'
        };

        Plotly.newPlot('pie-chart', data, layout);
    </script>

   

</body>
{% endblock %}
